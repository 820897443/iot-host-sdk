ARM GAS  /tmp/ccDr5TSB.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mx_serial.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.at_async_read,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	at_async_read:
  25              	.LFB128:
  26              		.file 1 "Platform/STM32F4xx/peripherals/mx_serial.c"
   1:Platform/STM32F4xx/peripherals/mx_serial.c **** /**
   2:Platform/STM32F4xx/peripherals/mx_serial.c ****  ******************************************************************************
   3:Platform/STM32F4xx/peripherals/mx_serial.c ****  * @file    mx_serial.c
   4:Platform/STM32F4xx/peripherals/mx_serial.c ****  * @author  QQ Ding
   5:Platform/STM32F4xx/peripherals/mx_serial.c ****  * @version V1.0.0
   6:Platform/STM32F4xx/peripherals/mx_serial.c ****  * @date    3-Sept-2018
   7:Platform/STM32F4xx/peripherals/mx_serial.c ****  * @brief   UART driver used for AT parser
   8:Platform/STM32F4xx/peripherals/mx_serial.c ****  ******************************************************************************
   9:Platform/STM32F4xx/peripherals/mx_serial.c ****  *
  10:Platform/STM32F4xx/peripherals/mx_serial.c ****  * Copyright (c) 2009-2018 MXCHIP Co.,Ltd.
  11:Platform/STM32F4xx/peripherals/mx_serial.c ****  *
  12:Platform/STM32F4xx/peripherals/mx_serial.c ****  * Licensed under the Apache License, Version 2.0 (the "License");
  13:Platform/STM32F4xx/peripherals/mx_serial.c ****  * you may not use this file except in compliance with the License.
  14:Platform/STM32F4xx/peripherals/mx_serial.c ****  * You may obtain a copy of the License at
  15:Platform/STM32F4xx/peripherals/mx_serial.c ****  *
  16:Platform/STM32F4xx/peripherals/mx_serial.c ****  *     http://www.apache.org/licenses/LICENSE-2.0
  17:Platform/STM32F4xx/peripherals/mx_serial.c ****  *
  18:Platform/STM32F4xx/peripherals/mx_serial.c ****  * Unless required by applicable law or agreed to in writing, software
  19:Platform/STM32F4xx/peripherals/mx_serial.c ****  * distributed under the License is distributed on an "AS IS" BASIS,
  20:Platform/STM32F4xx/peripherals/mx_serial.c ****  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Platform/STM32F4xx/peripherals/mx_serial.c ****  * See the License for the specific language governing permissions and
  22:Platform/STM32F4xx/peripherals/mx_serial.c ****  * limitations under the License.
  23:Platform/STM32F4xx/peripherals/mx_serial.c ****  *
  24:Platform/STM32F4xx/peripherals/mx_serial.c ****  ******************************************************************************
  25:Platform/STM32F4xx/peripherals/mx_serial.c ****  */
  26:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  27:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  28:Platform/STM32F4xx/peripherals/mx_serial.c **** #include "mx_common.h"
  29:Platform/STM32F4xx/peripherals/mx_serial.c **** #include "mx_hal.h"
  30:Platform/STM32F4xx/peripherals/mx_serial.c **** #include "mx_ringbuffer.h"
  31:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  32:Platform/STM32F4xx/peripherals/mx_serial.c **** /******************************************************************************
ARM GAS  /tmp/ccDr5TSB.s 			page 2


  33:Platform/STM32F4xx/peripherals/mx_serial.c ****  *                              Variable Definitions
  34:Platform/STM32F4xx/peripherals/mx_serial.c ****  ******************************************************************************/
  35:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  36:Platform/STM32F4xx/peripherals/mx_serial.c **** static int _timeout = 100;
  37:Platform/STM32F4xx/peripherals/mx_serial.c **** static uint8_t at_buffer[MX_SERIAL_RX_BUF_SIZE];
  38:Platform/STM32F4xx/peripherals/mx_serial.c **** static struct ringbuffer at_rx;
  39:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  40:Platform/STM32F4xx/peripherals/mx_serial.c **** /******************************************************************************
  41:Platform/STM32F4xx/peripherals/mx_serial.c ****  *                               Type Definitions
  42:Platform/STM32F4xx/peripherals/mx_serial.c ****  ******************************************************************************/
  43:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  44:Platform/STM32F4xx/peripherals/mx_serial.c **** static uart_dev_t uart_dev = {
  45:Platform/STM32F4xx/peripherals/mx_serial.c ****     AT_UART_PORT,
  46:Platform/STM32F4xx/peripherals/mx_serial.c ****     {
  47:Platform/STM32F4xx/peripherals/mx_serial.c ****         AT_UART_BAUDRATE,
  48:Platform/STM32F4xx/peripherals/mx_serial.c ****         DATA_WIDTH_8BIT,
  49:Platform/STM32F4xx/peripherals/mx_serial.c ****         NO_PARITY,
  50:Platform/STM32F4xx/peripherals/mx_serial.c ****         STOP_BITS_1,
  51:Platform/STM32F4xx/peripherals/mx_serial.c ****         FLOW_CONTROL_DISABLED,
  52:Platform/STM32F4xx/peripherals/mx_serial.c ****         MODE_TX_RX,
  53:Platform/STM32F4xx/peripherals/mx_serial.c ****     },
  54:Platform/STM32F4xx/peripherals/mx_serial.c **** };
  55:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  56:Platform/STM32F4xx/peripherals/mx_serial.c **** /******************************************************************************
  57:Platform/STM32F4xx/peripherals/mx_serial.c ****  *                              Function Definitions
  58:Platform/STM32F4xx/peripherals/mx_serial.c ****  ******************************************************************************/
  59:Platform/STM32F4xx/peripherals/mx_serial.c **** static int32_t at_async_read(uint8_t* const buf, const uint16_t length)
  60:Platform/STM32F4xx/peripherals/mx_serial.c **** {
  27              		.loc 1 60 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 8
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  61:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint16_t was_read = 0;
  62:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint32_t num;
  63:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  64:Platform/STM32F4xx/peripherals/mx_serial.c ****     if (buf == 0 || length == 0)
  32              		.loc 1 64 0
  33 0000 00B3     		cbz	r0, .L6
  60:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint16_t was_read = 0;
  34              		.loc 1 60 0 discriminator 1
  35 0002 F0B5     		push	{r4, r5, r6, r7, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 20
  38              		.cfi_offset 4, -20
  39              		.cfi_offset 5, -16
  40              		.cfi_offset 6, -12
  41              		.cfi_offset 7, -8
  42              		.cfi_offset 14, -4
  43 0004 83B0     		sub	sp, sp, #12
  44              	.LCFI1:
  45              		.cfi_def_cfa_offset 32
  46 0006 0646     		mov	r6, r0
  47              		.loc 1 64 0 discriminator 1
  48 0008 11B9     		cbnz	r1, .L12
  65:Platform/STM32F4xx/peripherals/mx_serial.c ****         return 0;
  49              		.loc 1 65 0
ARM GAS  /tmp/ccDr5TSB.s 			page 3


  50 000a 0020     		movs	r0, #0
  51              	.LVL1:
  52              	.L1:
  66:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  67:Platform/STM32F4xx/peripherals/mx_serial.c ****     CRITICAL_SECTION_ENTER()
  68:Platform/STM32F4xx/peripherals/mx_serial.c ****     num = ringbuffer_num(&at_rx);
  69:Platform/STM32F4xx/peripherals/mx_serial.c ****     CRITICAL_SECTION_LEAVE()
  70:Platform/STM32F4xx/peripherals/mx_serial.c **** //    printf("+[%d]",num);
  71:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  72:Platform/STM32F4xx/peripherals/mx_serial.c ****     while ((was_read < num) && (was_read < length)) {
  73:Platform/STM32F4xx/peripherals/mx_serial.c ****         ringbuffer_get(&at_rx, &buf[was_read++]);
  74:Platform/STM32F4xx/peripherals/mx_serial.c ****     }
  75:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  76:Platform/STM32F4xx/peripherals/mx_serial.c ****     return (int32_t)was_read;
  77:Platform/STM32F4xx/peripherals/mx_serial.c **** }
  53              		.loc 1 77 0
  54 000c 03B0     		add	sp, sp, #12
  55              	.LCFI2:
  56              		.cfi_remember_state
  57              		.cfi_def_cfa_offset 20
  58              		@ sp needed
  59 000e F0BD     		pop	{r4, r5, r6, r7, pc}
  60              	.LVL2:
  61              	.L12:
  62              	.LCFI3:
  63              		.cfi_restore_state
  64 0010 0D46     		mov	r5, r1
  65              	.LBB2:
  67:Platform/STM32F4xx/peripherals/mx_serial.c ****     num = ringbuffer_num(&at_rx);
  66              		.loc 1 67 0
  67 0012 01A8     		add	r0, sp, #4
  68              	.LVL3:
  69 0014 FFF7FEFF 		bl	atomic_enter_critical
  70              	.LVL4:
  68:Platform/STM32F4xx/peripherals/mx_serial.c ****     CRITICAL_SECTION_LEAVE()
  71              		.loc 1 68 0
  72 0018 0B48     		ldr	r0, .L13
  73 001a FFF7FEFF 		bl	ringbuffer_num
  74              	.LVL5:
  75 001e 0746     		mov	r7, r0
  76              	.LVL6:
  69:Platform/STM32F4xx/peripherals/mx_serial.c **** //    printf("+[%d]",num);
  77              		.loc 1 69 0
  78 0020 01A8     		add	r0, sp, #4
  79              	.LVL7:
  80 0022 FFF7FEFF 		bl	atomic_leave_critical
  81              	.LVL8:
  82              	.LBE2:
  61:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint32_t num;
  83              		.loc 1 61 0
  84 0026 0024     		movs	r4, #0
  72:Platform/STM32F4xx/peripherals/mx_serial.c ****         ringbuffer_get(&at_rx, &buf[was_read++]);
  85              		.loc 1 72 0
  86 0028 05E0     		b	.L3
  87              	.LVL9:
  88              	.L5:
  73:Platform/STM32F4xx/peripherals/mx_serial.c ****     }
ARM GAS  /tmp/ccDr5TSB.s 			page 4


  89              		.loc 1 73 0
  90 002a 0134     		adds	r4, r4, #1
  91              	.LVL10:
  92 002c A4B2     		uxth	r4, r4
  93              	.LVL11:
  94 002e 3144     		add	r1, r1, r6
  95 0030 0548     		ldr	r0, .L13
  96 0032 FFF7FEFF 		bl	ringbuffer_get
  97              	.LVL12:
  98              	.L3:
  72:Platform/STM32F4xx/peripherals/mx_serial.c ****         ringbuffer_get(&at_rx, &buf[was_read++]);
  99              		.loc 1 72 0
 100 0036 2146     		mov	r1, r4
 101 0038 BC42     		cmp	r4, r7
 102 003a 01D2     		bcs	.L4
  72:Platform/STM32F4xx/peripherals/mx_serial.c ****         ringbuffer_get(&at_rx, &buf[was_read++]);
 103              		.loc 1 72 0 is_stmt 0 discriminator 1
 104 003c AC42     		cmp	r4, r5
 105 003e F4D3     		bcc	.L5
 106              	.L4:
  76:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 107              		.loc 1 76 0 is_stmt 1
 108 0040 2046     		mov	r0, r4
 109 0042 E3E7     		b	.L1
 110              	.LVL13:
 111              	.L6:
 112              	.LCFI4:
 113              		.cfi_def_cfa_offset 0
 114              		.cfi_restore 4
 115              		.cfi_restore 5
 116              		.cfi_restore 6
 117              		.cfi_restore 7
 118              		.cfi_restore 14
  65:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 119              		.loc 1 65 0
 120 0044 0020     		movs	r0, #0
 121              	.LVL14:
 122              		.loc 1 77 0
 123 0046 7047     		bx	lr
 124              	.L14:
 125              		.align	2
 126              	.L13:
 127 0048 00000000 		.word	.LANCHOR0
 128              		.cfi_endproc
 129              	.LFE128:
 131              		.section	.text.mx_hal_serial_init,"ax",%progbits
 132              		.align	1
 133              		.global	mx_hal_serial_init
 134              		.syntax unified
 135              		.thumb
 136              		.thumb_func
 137              		.fpu fpv4-sp-d16
 139              	mx_hal_serial_init:
 140              	.LFB129:
  78:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  79:Platform/STM32F4xx/peripherals/mx_serial.c **** void mx_hal_serial_init(int timeout)
  80:Platform/STM32F4xx/peripherals/mx_serial.c **** {
ARM GAS  /tmp/ccDr5TSB.s 			page 5


 141              		.loc 1 80 0
 142              		.cfi_startproc
 143              		@ args = 0, pretend = 0, frame = 0
 144              		@ frame_needed = 0, uses_anonymous_args = 0
 145              	.LVL15:
 146 0000 00B5     		push	{lr}
 147              	.LCFI5:
 148              		.cfi_def_cfa_offset 4
 149              		.cfi_offset 14, -4
 150 0002 83B0     		sub	sp, sp, #12
 151              	.LCFI6:
 152              		.cfi_def_cfa_offset 16
  81:Platform/STM32F4xx/peripherals/mx_serial.c ****     mx_status err;
  82:Platform/STM32F4xx/peripherals/mx_serial.c ****     _timeout = timeout;
 153              		.loc 1 82 0
 154 0004 0C4B     		ldr	r3, .L20
 155 0006 1860     		str	r0, [r3]
  83:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  84:Platform/STM32F4xx/peripherals/mx_serial.c ****     ringbuffer_init(&at_rx, at_buffer, MX_SERIAL_RX_BUF_SIZE);
 156              		.loc 1 84 0
 157 0008 4FF48062 		mov	r2, #1024
 158 000c 0B49     		ldr	r1, .L20+4
 159 000e 0C48     		ldr	r0, .L20+8
 160              	.LVL16:
 161 0010 FFF7FEFF 		bl	ringbuffer_init
 162              	.LVL17:
  85:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  86:Platform/STM32F4xx/peripherals/mx_serial.c ****     err = mx_hal_uart_init(&uart_dev);
 163              		.loc 1 86 0
 164 0014 0B48     		ldr	r0, .L20+12
 165 0016 FFF7FEFF 		bl	mx_hal_uart_init
 166              	.LVL18:
 167              	.LBB3:
  87:Platform/STM32F4xx/peripherals/mx_serial.c ****     require_noerr(err, exit);
 168              		.loc 1 87 0
 169 001a 20B9     		cbnz	r0, .L19
 170              	.LBE3:
  88:Platform/STM32F4xx/peripherals/mx_serial.c ****     mx_hal_serial_iaq_set( );   
 171              		.loc 1 88 0
 172 001c FFF7FEFF 		bl	mx_hal_serial_iaq_set
 173              	.LVL19:
 174              	.L17:
 175              	.L15:
  89:Platform/STM32F4xx/peripherals/mx_serial.c **** exit:
  90:Platform/STM32F4xx/peripherals/mx_serial.c ****     return;
  91:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 176              		.loc 1 91 0
 177 0020 03B0     		add	sp, sp, #12
 178              	.LCFI7:
 179              		.cfi_remember_state
 180              		.cfi_def_cfa_offset 4
 181              		@ sp needed
 182 0022 5DF804FB 		ldr	pc, [sp], #4
 183              	.LVL20:
 184              	.L19:
 185              	.LCFI8:
 186              		.cfi_restore_state
ARM GAS  /tmp/ccDr5TSB.s 			page 6


 187              	.LBB4:
  87:Platform/STM32F4xx/peripherals/mx_serial.c ****     mx_hal_serial_iaq_set( );   
 188              		.loc 1 87 0 discriminator 1
 189 0026 084B     		ldr	r3, .L20+16
 190 0028 0093     		str	r3, [sp]
 191 002a 5723     		movs	r3, #87
 192 002c 074A     		ldr	r2, .L20+20
 193 002e 0849     		ldr	r1, .L20+24
 194 0030 0848     		ldr	r0, .L20+28
 195              	.LVL21:
 196 0032 FFF7FEFF 		bl	printf
 197              	.LVL22:
 198 0036 F3E7     		b	.L15
 199              	.L21:
 200              		.align	2
 201              	.L20:
 202 0038 00000000 		.word	.LANCHOR1
 203 003c 00000000 		.word	.LANCHOR2
 204 0040 00000000 		.word	.LANCHOR0
 205 0044 00000000 		.word	.LANCHOR3
 206 0048 4C000000 		.word	.LC2
 207 004c 00000000 		.word	.LANCHOR4
 208 0050 1F000000 		.word	.LC0+31
 209 0054 2C000000 		.word	.LC1
 210              	.LBE4:
 211              		.cfi_endproc
 212              	.LFE129:
 214              		.section	.text.mx_hal_serial_set_timeout,"ax",%progbits
 215              		.align	1
 216              		.global	mx_hal_serial_set_timeout
 217              		.syntax unified
 218              		.thumb
 219              		.thumb_func
 220              		.fpu fpv4-sp-d16
 222              	mx_hal_serial_set_timeout:
 223              	.LFB130:
  92:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  93:Platform/STM32F4xx/peripherals/mx_serial.c **** void mx_hal_serial_set_timeout(int timeout)
  94:Platform/STM32F4xx/peripherals/mx_serial.c **** {
 224              		.loc 1 94 0
 225              		.cfi_startproc
 226              		@ args = 0, pretend = 0, frame = 0
 227              		@ frame_needed = 0, uses_anonymous_args = 0
 228              		@ link register save eliminated.
 229              	.LVL23:
  95:Platform/STM32F4xx/peripherals/mx_serial.c ****     _timeout = timeout;
 230              		.loc 1 95 0
 231 0000 014B     		ldr	r3, .L23
 232 0002 1860     		str	r0, [r3]
  96:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 233              		.loc 1 96 0
 234 0004 7047     		bx	lr
 235              	.L24:
 236 0006 00BF     		.align	2
 237              	.L23:
 238 0008 00000000 		.word	.LANCHOR1
 239              		.cfi_endproc
ARM GAS  /tmp/ccDr5TSB.s 			page 7


 240              	.LFE130:
 242              		.section	.text.mx_hal_serial_putc,"ax",%progbits
 243              		.align	1
 244              		.global	mx_hal_serial_putc
 245              		.syntax unified
 246              		.thumb
 247              		.thumb_func
 248              		.fpu fpv4-sp-d16
 250              	mx_hal_serial_putc:
 251              	.LFB131:
  97:Platform/STM32F4xx/peripherals/mx_serial.c **** 
  98:Platform/STM32F4xx/peripherals/mx_serial.c **** int mx_hal_serial_putc(char c)
  99:Platform/STM32F4xx/peripherals/mx_serial.c **** {
 252              		.loc 1 99 0
 253              		.cfi_startproc
 254              		@ args = 0, pretend = 0, frame = 8
 255              		@ frame_needed = 0, uses_anonymous_args = 0
 256              	.LVL24:
 257 0000 00B5     		push	{lr}
 258              	.LCFI9:
 259              		.cfi_def_cfa_offset 4
 260              		.cfi_offset 14, -4
 261 0002 83B0     		sub	sp, sp, #12
 262              	.LCFI10:
 263              		.cfi_def_cfa_offset 16
 264 0004 02A9     		add	r1, sp, #8
 265 0006 01F8010D 		strb	r0, [r1, #-1]!
 100:Platform/STM32F4xx/peripherals/mx_serial.c ****     return mx_hal_uart_send(&uart_dev, &c, 1, _timeout);
 266              		.loc 1 100 0
 267 000a 044B     		ldr	r3, .L27
 268 000c 1B68     		ldr	r3, [r3]
 269 000e 0122     		movs	r2, #1
 270 0010 0348     		ldr	r0, .L27+4
 271              	.LVL25:
 272 0012 FFF7FEFF 		bl	mx_hal_uart_send
 273              	.LVL26:
 101:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 274              		.loc 1 101 0
 275 0016 03B0     		add	sp, sp, #12
 276              	.LCFI11:
 277              		.cfi_def_cfa_offset 4
 278              		@ sp needed
 279 0018 5DF804FB 		ldr	pc, [sp], #4
 280              	.L28:
 281              		.align	2
 282              	.L27:
 283 001c 00000000 		.word	.LANCHOR1
 284 0020 00000000 		.word	.LANCHOR3
 285              		.cfi_endproc
 286              	.LFE131:
 288              		.section	.text.mx_hal_serial_getc,"ax",%progbits
 289              		.align	1
 290              		.global	mx_hal_serial_getc
 291              		.syntax unified
 292              		.thumb
 293              		.thumb_func
 294              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccDr5TSB.s 			page 8


 296              	mx_hal_serial_getc:
 297              	.LFB132:
 102:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 103:Platform/STM32F4xx/peripherals/mx_serial.c **** int mx_hal_serial_getc(void)
 104:Platform/STM32F4xx/peripherals/mx_serial.c **** {
 298              		.loc 1 104 0
 299              		.cfi_startproc
 300              		@ args = 0, pretend = 0, frame = 8
 301              		@ frame_needed = 0, uses_anonymous_args = 0
 302 0000 10B5     		push	{r4, lr}
 303              	.LCFI12:
 304              		.cfi_def_cfa_offset 8
 305              		.cfi_offset 4, -8
 306              		.cfi_offset 14, -4
 307 0002 82B0     		sub	sp, sp, #8
 308              	.LCFI13:
 309              		.cfi_def_cfa_offset 16
 105:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint32_t current = mx_hal_ms_ticker_read();
 310              		.loc 1 105 0
 311 0004 FFF7FEFF 		bl	mx_hal_ms_ticker_read
 312              	.LVL27:
 313 0008 0446     		mov	r4, r0
 314              	.LVL28:
 315              	.L32:
 106:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint8_t ch;
 107:Platform/STM32F4xx/peripherals/mx_serial.c ****     
 108:Platform/STM32F4xx/peripherals/mx_serial.c **** //    printf("_timeout:%d\r\n", _timeout);
 109:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 110:Platform/STM32F4xx/peripherals/mx_serial.c ****     do {
 111:Platform/STM32F4xx/peripherals/mx_serial.c ****         if (at_async_read(&ch, 1) == 1)
 316              		.loc 1 111 0
 317 000a 0121     		movs	r1, #1
 318 000c 0DF10700 		add	r0, sp, #7
 319 0010 FFF7FEFF 		bl	at_async_read
 320              	.LVL29:
 321 0014 0128     		cmp	r0, #1
 322 0016 09D0     		beq	.L34
 112:Platform/STM32F4xx/peripherals/mx_serial.c ****         {
 113:Platform/STM32F4xx/peripherals/mx_serial.c **** //          printf("-ch[%02x]\r\n",ch);
 114:Platform/STM32F4xx/peripherals/mx_serial.c ****             return ch;
 115:Platform/STM32F4xx/peripherals/mx_serial.c ****         }
 116:Platform/STM32F4xx/peripherals/mx_serial.c **** //        printf("time:%d\r\n", (mx_hal_ms_ticker_read() - current));
 117:Platform/STM32F4xx/peripherals/mx_serial.c ****     } while ((mx_hal_ms_ticker_read() - current) < _timeout);
 323              		.loc 1 117 0
 324 0018 FFF7FEFF 		bl	mx_hal_ms_ticker_read
 325              	.LVL30:
 326 001c 001B     		subs	r0, r0, r4
 327 001e 054B     		ldr	r3, .L35
 328 0020 1B68     		ldr	r3, [r3]
 329 0022 9842     		cmp	r0, r3
 330 0024 F1D3     		bcc	.L32
 118:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 119:Platform/STM32F4xx/peripherals/mx_serial.c ****     return -1;
 331              		.loc 1 119 0
 332 0026 4FF0FF30 		mov	r0, #-1
 333 002a 01E0     		b	.L29
 334              	.L34:
ARM GAS  /tmp/ccDr5TSB.s 			page 9


 114:Platform/STM32F4xx/peripherals/mx_serial.c ****         }
 335              		.loc 1 114 0
 336 002c 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 337              	.L29:
 120:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 338              		.loc 1 120 0
 339 0030 02B0     		add	sp, sp, #8
 340              	.LCFI14:
 341              		.cfi_def_cfa_offset 8
 342              		@ sp needed
 343 0032 10BD     		pop	{r4, pc}
 344              	.LVL31:
 345              	.L36:
 346              		.align	2
 347              	.L35:
 348 0034 00000000 		.word	.LANCHOR1
 349              		.cfi_endproc
 350              	.LFE132:
 352              		.section	.text.mx_hal_serial_readable,"ax",%progbits
 353              		.align	1
 354              		.global	mx_hal_serial_readable
 355              		.syntax unified
 356              		.thumb
 357              		.thumb_func
 358              		.fpu fpv4-sp-d16
 360              	mx_hal_serial_readable:
 361              	.LFB133:
 121:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 122:Platform/STM32F4xx/peripherals/mx_serial.c **** bool mx_hal_serial_readable(void)
 123:Platform/STM32F4xx/peripherals/mx_serial.c **** {
 362              		.loc 1 123 0
 363              		.cfi_startproc
 364              		@ args = 0, pretend = 0, frame = 0
 365              		@ frame_needed = 0, uses_anonymous_args = 0
 366 0000 08B5     		push	{r3, lr}
 367              	.LCFI15:
 368              		.cfi_def_cfa_offset 8
 369              		.cfi_offset 3, -8
 370              		.cfi_offset 14, -4
 124:Platform/STM32F4xx/peripherals/mx_serial.c ****     if (ringbuffer_num(&at_rx))
 371              		.loc 1 124 0
 372 0002 0448     		ldr	r0, .L42
 373 0004 FFF7FEFF 		bl	ringbuffer_num
 374              	.LVL32:
 375 0008 08B9     		cbnz	r0, .L41
 125:Platform/STM32F4xx/peripherals/mx_serial.c ****         return true;
 126:Platform/STM32F4xx/peripherals/mx_serial.c ****     return false;
 376              		.loc 1 126 0
 377 000a 0020     		movs	r0, #0
 378              	.L38:
 127:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 379              		.loc 1 127 0
 380 000c 08BD     		pop	{r3, pc}
 381              	.L41:
 125:Platform/STM32F4xx/peripherals/mx_serial.c ****         return true;
 382              		.loc 1 125 0
 383 000e 0120     		movs	r0, #1
ARM GAS  /tmp/ccDr5TSB.s 			page 10


 384 0010 FCE7     		b	.L38
 385              	.L43:
 386 0012 00BF     		.align	2
 387              	.L42:
 388 0014 00000000 		.word	.LANCHOR0
 389              		.cfi_endproc
 390              	.LFE133:
 392              		.section	.text.mx_hal_serial_flush,"ax",%progbits
 393              		.align	1
 394              		.global	mx_hal_serial_flush
 395              		.syntax unified
 396              		.thumb
 397              		.thumb_func
 398              		.fpu fpv4-sp-d16
 400              	mx_hal_serial_flush:
 401              	.LFB134:
 128:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 129:Platform/STM32F4xx/peripherals/mx_serial.c **** void mx_hal_serial_flush(void)
 130:Platform/STM32F4xx/peripherals/mx_serial.c **** {
 402              		.loc 1 130 0
 403              		.cfi_startproc
 404              		@ args = 0, pretend = 0, frame = 8
 405              		@ frame_needed = 0, uses_anonymous_args = 0
 406 0000 10B5     		push	{r4, lr}
 407              	.LCFI16:
 408              		.cfi_def_cfa_offset 8
 409              		.cfi_offset 4, -8
 410              		.cfi_offset 14, -4
 411 0002 82B0     		sub	sp, sp, #8
 412              	.LCFI17:
 413              		.cfi_def_cfa_offset 16
 131:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint32_t num;
 132:Platform/STM32F4xx/peripherals/mx_serial.c ****     uint8_t tmp; 
 133:Platform/STM32F4xx/peripherals/mx_serial.c ****     for (num = ringbuffer_num(&at_rx); num > 0; num--) {
 414              		.loc 1 133 0
 415 0004 0748     		ldr	r0, .L48
 416 0006 FFF7FEFF 		bl	ringbuffer_num
 417              	.LVL33:
 418 000a 0446     		mov	r4, r0
 419              	.LVL34:
 420 000c 05E0     		b	.L45
 421              	.LVL35:
 422              	.L46:
 134:Platform/STM32F4xx/peripherals/mx_serial.c ****         ringbuffer_get(&at_rx, &tmp);
 423              		.loc 1 134 0 discriminator 3
 424 000e 0DF10701 		add	r1, sp, #7
 425 0012 0448     		ldr	r0, .L48
 426 0014 FFF7FEFF 		bl	ringbuffer_get
 427              	.LVL36:
 133:Platform/STM32F4xx/peripherals/mx_serial.c ****         ringbuffer_get(&at_rx, &tmp);
 428              		.loc 1 133 0 discriminator 3
 429 0018 013C     		subs	r4, r4, #1
 430              	.LVL37:
 431              	.L45:
 133:Platform/STM32F4xx/peripherals/mx_serial.c ****         ringbuffer_get(&at_rx, &tmp);
 432              		.loc 1 133 0 is_stmt 0 discriminator 1
 433 001a 002C     		cmp	r4, #0
ARM GAS  /tmp/ccDr5TSB.s 			page 11


 434 001c F7D1     		bne	.L46
 135:Platform/STM32F4xx/peripherals/mx_serial.c ****     }
 136:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 137:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 435              		.loc 1 137 0 is_stmt 1
 436 001e 02B0     		add	sp, sp, #8
 437              	.LCFI18:
 438              		.cfi_def_cfa_offset 8
 439              		@ sp needed
 440 0020 10BD     		pop	{r4, pc}
 441              	.LVL38:
 442              	.L49:
 443 0022 00BF     		.align	2
 444              	.L48:
 445 0024 00000000 		.word	.LANCHOR0
 446              		.cfi_endproc
 447              	.LFE134:
 449              		.section	.text.set_serial_ringbuffer,"ax",%progbits
 450              		.align	1
 451              		.global	set_serial_ringbuffer
 452              		.syntax unified
 453              		.thumb
 454              		.thumb_func
 455              		.fpu fpv4-sp-d16
 457              	set_serial_ringbuffer:
 458              	.LFB135:
 138:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 139:Platform/STM32F4xx/peripherals/mx_serial.c **** void set_serial_ringbuffer( uint8_t data)
 140:Platform/STM32F4xx/peripherals/mx_serial.c **** {
 459              		.loc 1 140 0
 460              		.cfi_startproc
 461              		@ args = 0, pretend = 0, frame = 8
 462              		@ frame_needed = 0, uses_anonymous_args = 0
 463              	.LVL39:
 464 0000 10B5     		push	{r4, lr}
 465              	.LCFI19:
 466              		.cfi_def_cfa_offset 8
 467              		.cfi_offset 4, -8
 468              		.cfi_offset 14, -4
 469 0002 82B0     		sub	sp, sp, #8
 470              	.LCFI20:
 471              		.cfi_def_cfa_offset 16
 472 0004 0446     		mov	r4, r0
 473              	.LBB5:
 141:Platform/STM32F4xx/peripherals/mx_serial.c ****   CRITICAL_SECTION_ENTER()
 474              		.loc 1 141 0
 475 0006 01A8     		add	r0, sp, #4
 476              	.LVL40:
 477 0008 FFF7FEFF 		bl	atomic_enter_critical
 478              	.LVL41:
 142:Platform/STM32F4xx/peripherals/mx_serial.c ****   ringbuffer_put(&at_rx, data);
 479              		.loc 1 142 0
 480 000c 2146     		mov	r1, r4
 481 000e 0448     		ldr	r0, .L52
 482 0010 FFF7FEFF 		bl	ringbuffer_put
 483              	.LVL42:
 143:Platform/STM32F4xx/peripherals/mx_serial.c ****   CRITICAL_SECTION_LEAVE()
ARM GAS  /tmp/ccDr5TSB.s 			page 12


 484              		.loc 1 143 0
 485 0014 01A8     		add	r0, sp, #4
 486 0016 FFF7FEFF 		bl	atomic_leave_critical
 487              	.LVL43:
 488              	.LBE5:
 144:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 489              		.loc 1 144 0
 490 001a 02B0     		add	sp, sp, #8
 491              	.LCFI21:
 492              		.cfi_def_cfa_offset 8
 493              		@ sp needed
 494 001c 10BD     		pop	{r4, pc}
 495              	.L53:
 496 001e 00BF     		.align	2
 497              	.L52:
 498 0020 00000000 		.word	.LANCHOR0
 499              		.cfi_endproc
 500              	.LFE135:
 502              		.section	.text.USART2_IRQHandler,"ax",%progbits
 503              		.align	1
 504              		.global	USART2_IRQHandler
 505              		.syntax unified
 506              		.thumb
 507              		.thumb_func
 508              		.fpu fpv4-sp-d16
 510              	USART2_IRQHandler:
 511              	.LFB136:
 145:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 146:Platform/STM32F4xx/peripherals/mx_serial.c **** /**
 147:Platform/STM32F4xx/peripherals/mx_serial.c **** * @brief This function handles USART2 global interrupt.
 148:Platform/STM32F4xx/peripherals/mx_serial.c **** */
 149:Platform/STM32F4xx/peripherals/mx_serial.c **** void USART2_IRQHandler(void)
 150:Platform/STM32F4xx/peripherals/mx_serial.c **** {
 512              		.loc 1 150 0
 513              		.cfi_startproc
 514              		@ args = 0, pretend = 0, frame = 0
 515              		@ frame_needed = 0, uses_anonymous_args = 0
 516 0000 08B5     		push	{r3, lr}
 517              	.LCFI22:
 518              		.cfi_def_cfa_offset 8
 519              		.cfi_offset 3, -8
 520              		.cfi_offset 14, -4
 151:Platform/STM32F4xx/peripherals/mx_serial.c ****   /* USER CODE BEGIN USART2_IRQn 0 */
 152:Platform/STM32F4xx/peripherals/mx_serial.c **** 
 153:Platform/STM32F4xx/peripherals/mx_serial.c ****   /* USER CODE END USART2_IRQn 0 */
 154:Platform/STM32F4xx/peripherals/mx_serial.c **** //  HAL_UART_IRQHandler(&huart2);
 155:Platform/STM32F4xx/peripherals/mx_serial.c ****   
 156:Platform/STM32F4xx/peripherals/mx_serial.c **** //  data_rx[data_rx_cnt ++] = (uint8_t)(at_uart.Instance->DR&(uint8_t)0x00FF) ;
 157:Platform/STM32F4xx/peripherals/mx_serial.c **** //  if( data_rx_cnt >= 512 )
 158:Platform/STM32F4xx/peripherals/mx_serial.c **** //  {
 159:Platform/STM32F4xx/peripherals/mx_serial.c **** //    data_rx_cnt = 0;
 160:Platform/STM32F4xx/peripherals/mx_serial.c **** //  }
 161:Platform/STM32F4xx/peripherals/mx_serial.c **** //  data_rx_flag = 1;
 162:Platform/STM32F4xx/peripherals/mx_serial.c ****   /* USER CODE BEGIN USART2_IRQn 1 */
 163:Platform/STM32F4xx/peripherals/mx_serial.c ****   uint8_t ch;
 164:Platform/STM32F4xx/peripherals/mx_serial.c ****   ch =(uint8_t)(at_uart.Instance->DR&(uint8_t)0x00FF);
 521              		.loc 1 164 0
ARM GAS  /tmp/ccDr5TSB.s 			page 13


 522 0002 034B     		ldr	r3, .L56
 523 0004 1B68     		ldr	r3, [r3]
 524 0006 5868     		ldr	r0, [r3, #4]
 525              	.LVL44:
 165:Platform/STM32F4xx/peripherals/mx_serial.c ****   set_serial_ringbuffer( ch );
 526              		.loc 1 165 0
 527 0008 C0B2     		uxtb	r0, r0
 528 000a FFF7FEFF 		bl	set_serial_ringbuffer
 529              	.LVL45:
 166:Platform/STM32F4xx/peripherals/mx_serial.c ****   /* USER CODE END USART2_IRQn 1 */
 167:Platform/STM32F4xx/peripherals/mx_serial.c **** }
 530              		.loc 1 167 0
 531 000e 08BD     		pop	{r3, pc}
 532              	.L57:
 533              		.align	2
 534              	.L56:
 535 0010 00000000 		.word	at_uart
 536              		.cfi_endproc
 537              	.LFE136:
 539              		.section	.bss.at_buffer,"aw",%nobits
 540              		.align	2
 541              		.set	.LANCHOR2,. + 0
 544              	at_buffer:
 545 0000 00000000 		.space	1024
 545      00000000 
 545      00000000 
 545      00000000 
 545      00000000 
 546              		.section	.bss.at_rx,"aw",%nobits
 547              		.align	2
 548              		.set	.LANCHOR0,. + 0
 551              	at_rx:
 552 0000 00000000 		.space	16
 552      00000000 
 552      00000000 
 552      00000000 
 553              		.section	.data._timeout,"aw",%progbits
 554              		.align	2
 555              		.set	.LANCHOR1,. + 0
 558              	_timeout:
 559 0000 64000000 		.word	100
 560              		.section	.data.uart_dev,"aw",%progbits
 561              		.align	2
 562              		.set	.LANCHOR3,. + 0
 565              	uart_dev:
 566 0000 00       		.byte	0
 567 0001 000000   		.space	3
 568 0004 00C20100 		.word	115200
 569 0008 03       		.byte	3
 570 0009 00       		.byte	0
 571 000a 00       		.byte	0
 572 000b 00       		.byte	0
 573 000c 02       		.byte	2
 574 000d 000000   		.space	3
 575              		.section	.rodata.__PRETTY_FUNCTION__.9116,"a",%progbits
 576              		.align	2
 577              		.set	.LANCHOR4,. + 0
ARM GAS  /tmp/ccDr5TSB.s 			page 14


 580              	__PRETTY_FUNCTION__.9116:
 581 0000 6D785F68 		.ascii	"mx_hal_serial_init\000"
 581      616C5F73 
 581      65726961 
 581      6C5F696E 
 581      697400
 582              		.section	.rodata.mx_hal_serial_init.str1.4,"aMS",%progbits,1
 583              		.align	2
 584              	.LC0:
 585 0000 506C6174 		.ascii	"Platform/STM32F4xx/peripherals/mx_serial.c\000"
 585      666F726D 
 585      2F53544D 
 585      33324634 
 585      78782F70 
 586 002b 00       		.space	1
 587              	.LC1:
 588 002c 5B4D583A 		.ascii	"[MX:%s:%s:%4d] **ASSERT** %s\015\012\000"
 588      25733A25 
 588      733A2534 
 588      645D202A 
 588      2A415353 
 589 004b 00       		.space	1
 590              	.LC2:
 591 004c 00       		.ascii	"\000"
 592              		.text
 593              	.Letext0:
 594              		.file 2 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-no
 595              		.file 3 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-no
 596              		.file 4 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-no
 597              		.file 5 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-no
 598              		.file 6 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/lib/gc
 599              		.file 7 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-no
 600              		.file 8 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-no
 601              		.file 9 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-no
 602              		.file 10 "src/helper/mx_common.h"
 603              		.file 11 "Platform/STM32F4xx/drivers/CMSIS/Include/core_cm4.h"
 604              		.file 12 "Platform/STM32F4xx/drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 605              		.file 13 "Platform/STM32F4xx/drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f411xe.h"
 606              		.file 14 "Platform/STM32F4xx/drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 607              		.file 15 "Platform/STM32F4xx/drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 608              		.file 16 "Platform/STM32F4xx/drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 609              		.file 17 "Platform/STM32F4xx/peripherals/mx_hal.h"
 610              		.file 18 "src/helper/mx_utils/mx_ringbuffer.h"
 611              		.file 19 "/home/wumingju/Documents/aos/AliOS-Things/build/compiler/gcc-arm-none-eabi/Linux64/arm-n
ARM GAS  /tmp/ccDr5TSB.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mx_serial.c
     /tmp/ccDr5TSB.s:18     .text.at_async_read:0000000000000000 $t
     /tmp/ccDr5TSB.s:24     .text.at_async_read:0000000000000000 at_async_read
     /tmp/ccDr5TSB.s:127    .text.at_async_read:0000000000000048 $d
     /tmp/ccDr5TSB.s:132    .text.mx_hal_serial_init:0000000000000000 $t
     /tmp/ccDr5TSB.s:139    .text.mx_hal_serial_init:0000000000000000 mx_hal_serial_init
     /tmp/ccDr5TSB.s:202    .text.mx_hal_serial_init:0000000000000038 $d
     /tmp/ccDr5TSB.s:215    .text.mx_hal_serial_set_timeout:0000000000000000 $t
     /tmp/ccDr5TSB.s:222    .text.mx_hal_serial_set_timeout:0000000000000000 mx_hal_serial_set_timeout
     /tmp/ccDr5TSB.s:238    .text.mx_hal_serial_set_timeout:0000000000000008 $d
     /tmp/ccDr5TSB.s:243    .text.mx_hal_serial_putc:0000000000000000 $t
     /tmp/ccDr5TSB.s:250    .text.mx_hal_serial_putc:0000000000000000 mx_hal_serial_putc
     /tmp/ccDr5TSB.s:283    .text.mx_hal_serial_putc:000000000000001c $d
     /tmp/ccDr5TSB.s:289    .text.mx_hal_serial_getc:0000000000000000 $t
     /tmp/ccDr5TSB.s:296    .text.mx_hal_serial_getc:0000000000000000 mx_hal_serial_getc
     /tmp/ccDr5TSB.s:348    .text.mx_hal_serial_getc:0000000000000034 $d
     /tmp/ccDr5TSB.s:353    .text.mx_hal_serial_readable:0000000000000000 $t
     /tmp/ccDr5TSB.s:360    .text.mx_hal_serial_readable:0000000000000000 mx_hal_serial_readable
     /tmp/ccDr5TSB.s:388    .text.mx_hal_serial_readable:0000000000000014 $d
     /tmp/ccDr5TSB.s:393    .text.mx_hal_serial_flush:0000000000000000 $t
     /tmp/ccDr5TSB.s:400    .text.mx_hal_serial_flush:0000000000000000 mx_hal_serial_flush
     /tmp/ccDr5TSB.s:445    .text.mx_hal_serial_flush:0000000000000024 $d
     /tmp/ccDr5TSB.s:450    .text.set_serial_ringbuffer:0000000000000000 $t
     /tmp/ccDr5TSB.s:457    .text.set_serial_ringbuffer:0000000000000000 set_serial_ringbuffer
     /tmp/ccDr5TSB.s:498    .text.set_serial_ringbuffer:0000000000000020 $d
     /tmp/ccDr5TSB.s:503    .text.USART2_IRQHandler:0000000000000000 $t
     /tmp/ccDr5TSB.s:510    .text.USART2_IRQHandler:0000000000000000 USART2_IRQHandler
     /tmp/ccDr5TSB.s:535    .text.USART2_IRQHandler:0000000000000010 $d
     /tmp/ccDr5TSB.s:540    .bss.at_buffer:0000000000000000 $d
     /tmp/ccDr5TSB.s:544    .bss.at_buffer:0000000000000000 at_buffer
     /tmp/ccDr5TSB.s:547    .bss.at_rx:0000000000000000 $d
     /tmp/ccDr5TSB.s:551    .bss.at_rx:0000000000000000 at_rx
     /tmp/ccDr5TSB.s:554    .data._timeout:0000000000000000 $d
     /tmp/ccDr5TSB.s:558    .data._timeout:0000000000000000 _timeout
     /tmp/ccDr5TSB.s:561    .data.uart_dev:0000000000000000 $d
     /tmp/ccDr5TSB.s:565    .data.uart_dev:0000000000000000 uart_dev
     /tmp/ccDr5TSB.s:576    .rodata.__PRETTY_FUNCTION__.9116:0000000000000000 $d
     /tmp/ccDr5TSB.s:580    .rodata.__PRETTY_FUNCTION__.9116:0000000000000000 __PRETTY_FUNCTION__.9116
     /tmp/ccDr5TSB.s:583    .rodata.mx_hal_serial_init.str1.4:0000000000000000 $d
     /tmp/ccDr5TSB.s:584    .rodata.mx_hal_serial_init.str1.4:0000000000000000 .LC0

UNDEFINED SYMBOLS
atomic_enter_critical
ringbuffer_num
atomic_leave_critical
ringbuffer_get
ringbuffer_init
mx_hal_uart_init
mx_hal_serial_iaq_set
printf
mx_hal_uart_send
mx_hal_ms_ticker_read
ringbuffer_put
at_uart
